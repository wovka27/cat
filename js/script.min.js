const modl=()=>'\n<section class="modal">\n  <div class="modal__icon">\n    <svg class="modal__cat">\n      <use xlink:href="#cat"></use>\n    </svg>\n  </div>\n  <div class="modal__title">\n    <h2>Не правильный Email</h2>\n  </div>\n  <a href="#!" class="modal__btn">&times;</a>\n</section>\n',$el=document.querySelector('input[type="email"]');function validEmail(t){t.preventDefault();const e=/^(\S+)@([a-z0-9-]+)(\.)([a-z]{2,4})(\.?)([a-z]{0,4})+$/i;e.test(String(t.target.value).toLowerCase())?(modalText.innerText="Email подходит",modal.classList.add("active"),modal.style.backgroundColor="greenYellow"):e.test(String(t.target.value).toLowerCase())||(modalText.innerText="Email не подходит",modal.classList.add("active"),modal.style.backgroundColor="red")}function DynamicAdapt(t){this.type=t}$el.oninput=validEmail,DynamicAdapt.prototype.init=function(){const t=this;this.оbjects=[],this.daClassname="_dynamic_adapt_",this.nodes=document.querySelectorAll("[data-da]");for(let t=0;t<this.nodes.length;t++){const e=this.nodes[t],a=e.dataset.da.trim().split(","),n={};n.element=e,n.parent=e.parentNode,n.destination=document.querySelector(a[0].trim()),n.breakpoint=a[1]?a[1].trim():"767",n.place=a[2]?a[2].trim():"last",n.index=this.indexInParent(n.parent,n.element),this.оbjects.push(n)}this.arraySort(this.оbjects),this.mediaQueries=Array.prototype.map.call(this.оbjects,(function(t){return"("+this.type+"-width: "+t.breakpoint+"px),"+t.breakpoint}),this),this.mediaQueries=Array.prototype.filter.call(this.mediaQueries,(function(t,e,a){return Array.prototype.indexOf.call(a,t)===e}));for(let e=0;e<this.mediaQueries.length;e++){const a=this.mediaQueries[e],n=String.prototype.split.call(a,","),o=window.matchMedia(n[0]),i=n[1],l=Array.prototype.filter.call(this.оbjects,(function(t){return t.breakpoint===i}));o.addListener((function(){t.mediaHandler(o,l)})),this.mediaHandler(o,l)}},DynamicAdapt.prototype.mediaHandler=function(t,e){if(t.matches)for(let t=0;t<e.length;t++){const a=e[t];a.index=this.indexInParent(a.parent,a.element),this.moveTo(a.place,a.element,a.destination)}else for(let t=0;t<e.length;t++){const a=e[t];a.element.classList.contains(this.daClassname)&&this.moveBack(a.parent,a.element,a.index)}},DynamicAdapt.prototype.moveTo=function(t,e,a){e.classList.add(this.daClassname),"last"===t||t>=a.children.length?a.insertAdjacentElement("beforeend",e):"first"!==t?a.children[t].insertAdjacentElement("beforebegin",e):a.insertAdjacentElement("afterbegin",e)},DynamicAdapt.prototype.moveBack=function(t,e,a){e.classList.remove(this.daClassname),void 0!==t.children[a]?t.children[a].insertAdjacentElement("beforebegin",e):t.insertAdjacentElement("beforeend",e)},DynamicAdapt.prototype.indexInParent=function(t,e){const a=Array.prototype.slice.call(t.children);return Array.prototype.indexOf.call(a,e)},DynamicAdapt.prototype.arraySort=function(t){"min"===this.type?Array.prototype.sort.call(t,(function(t,e){return t.breakpoint===e.breakpoint?t.place===e.place?0:"first"===t.place||"last"===e.place?-1:"last"===t.place||"first"===e.place?1:t.place-e.place:t.breakpoint-e.breakpoint})):Array.prototype.sort.call(t,(function(t,e){return t.breakpoint===e.breakpoint?t.place===e.place?0:"first"===t.place||"last"===e.place?1:"last"===t.place||"first"===e.place?-1:e.place-t.place:e.breakpoint-t.breakpoint}))};const btn=document.querySelector(".header__row-burger");function clickBurger(){btn.classList.toggle("active"),btn.previousElementSibling.classList.toggle("active"),document.body.classList.toggle("lock")}btn.addEventListener("click",clickBurger);const catModels=[{id:Math.round(Number(Date.now()/(33*Math.random()))),title:"Кот полосатый",color:"Коричневый окрас",age:"5",pawsCount:"1",url:"./img/card_cat2.png",sold:!0,sale:!1,price:"9 000"},{id:Math.round(Number(Date.now()/(33*Math.random()))),title:"Кот полосатый",color:"Коричневый окрас",age:"9",pawsCount:"1",url:"./img/card_cat1.png",sold:!1,sale:!0,price:"1 000"},{id:Math.round(Number(Date.now()/(33*Math.random()))),title:"Кот полосатый",color:"Коричневый окрас",age:"1",pawsCount:"1",url:"./img/card_cat3.png",sold:!0,sale:!1,price:"5 000"},{id:Math.round(Number(Date.now()/(33*Math.random()))),title:"Кот полосатый",color:"Коричневый окрас",age:"8",pawsCount:"1",url:"./img/card_cat1.png",sold:!1,sale:!1,price:"84 000"},{id:Math.round(Number(Date.now()/(33*Math.random()))),title:"Кот полосатый",color:"Коричневый окрас",age:"4",pawsCount:"1",url:"./img/card_cat3.png",sold:!0,sale:!1,price:"27 000"},{id:Math.round(Number(Date.now()/(33*Math.random()))),title:"Кот полосатый",color:"Коричневый окрас",age:"7",pawsCount:"1",url:"./img/card_cat2.png",sold:!0,sale:!0,price:"60 000"},{id:Math.round(Number(Date.now()/(33*Math.random()))),title:"Кот полосатый",color:"Коричневый окрас",age:"3",pawsCount:"1",url:"./img/card_cat3.png",sold:!1,sale:!1,price:"30 000"},{id:Math.round(Number(Date.now()/(33*Math.random()))),title:"Кот полосатый",color:"Коричневый окрас",age:"2",pawsCount:"1",url:"./img/card_cat1.png",sold:!1,sale:!0,price:"10 000"},{id:Math.round(Number(Date.now()/(33*Math.random()))),title:"Кот полосатый",color:"Коричневый окрас",age:"10",pawsCount:"1",url:"./img/card_cat2.png",sold:!0,sale:!1,price:"60 000"}];function model(t){return`\n  <div id=${t.id} class="content-body__card">\n    <div class="content-body__card-row card-image">\n      <img src=${t.url} alt="${t.url}" />\n      <div class="like">\n        <svg>\n          <use xlink:href="#like"></use>\n        </svg>\n      </div>\n      ${t.sale?'<div class="sale">-40%</div>':""}\n    </div>\n    <div class="content-body__card-row card-desc">\n      <div class="card-desc__row">\n        <div class="card-desc__row-title">\n          <h2 data-obj="${t.title}">${t.title}</h2>\n        </div>\n        <div class="card-desc__row-desc">\n          <p>${t.color}</p>\n          <p>\n            <span data-age=${t.age}><b>${t.age} мес.</b></span>\n            <span>возраст</span>\n          </p>\n          <p>\n            <span data-obj="${t.pawsCount}"><b>${t.pawsCount}</b></span>\n            <span>Кол-во лап</span>\n          </p>\n        </div>\n      <div data-price=${t.price} class="card-desc__row-price"><h3><b>${t.price} руб.</b></h3></div>\n    </div>\n    <div class="card-desc__row">\n      <button ${t.sold?"disabled":""} class="${t.sold?"sold":""}">\n        ${t.sold?"Продан":"Купить"}\n      </button>\n    </div>\n  </div>\n  </div>\n`}const cat=document.querySelector(".favorites"),dialog=document.querySelector(".dialog"),dialogBody=dialog.querySelector("#dBody"),dialogItem=t=>`\n  <div class="dialog__item ${catArray&&localStorage.catArr?"active":""}">\n    <div class="dialog__item-column column-img">\n      <img src=${t.url} alt="фото котейки">\n    </div>\n    <div class="dialog__item-column column-desc">\n      <p>\n        <span><b>${t.age}</b> мес.</span>\n        <span>Возраст</span>\n      </p>\n    </div>\n    <div class="dialog__item-column column-btn">\n      <button ${t.sold?"disabled":""} class=${t.sold?"sold":""}>\n        ${t.sold?"Продано":"Купить"}\n      </button>\n      <button class="column-btn__delete" data-id=${t.id}>Убрать</button>\n    </div>\n  </div>\n`,dialogNull=()=>'<span class="not-cat">Список пуст...</span>',contentList=document.querySelector(".content-body__list"),toHTML=catModels.map(model).join(""),timeout=()=>{setTimeout(()=>{modal.classList.remove("active")},2e3)};contentList.insertAdjacentHTML("afterbegin",toHTML);const likeBtn=document.querySelectorAll(".like"),catArray=new Array,catFilter=[],catsLength=()=>{cat.firstElementChild.innerHTML=""+(catArray.length?catArray.length+1:'\n    <svg class="modal__cat">\n      <use xlink:href="#cat"></use>\n    </svg>\n  '),cat.firstElementChild.classList.add("text")};function activeLike(){likeBtn.forEach(t=>{t.addEventListener("click",()=>{const e=t.classList.contains("active");e||(catsLength(),t.classList.add("active"),modal.classList.add("active"),timeout()),e&&(t.classList.remove("active"),modalText.innerText="Удалено из избранного",modal.classList.add("active"),timeout())})})}const renderCat=()=>dialogBody.innerHTML=""+catArray.map(t=>dialogItem(t)).join("");function getCatData(){Array.from(contentList.children).map(t=>{t.addEventListener("click",e=>{catModels.map(a=>{a.id===Number(t.id)&&e.target.closest(".like")&&catArray.push(a)}),dialogBody.innerHTML=""+catArray.map(t=>dialogItem(t)).join("")})})}function filterPrice(){const t=JSON.parse(JSON.stringify(catModels));t.forEach(t=>t.price=+t.price.replace(/\D/g,"")),t.sort((t,e)=>t.price>e.price?1:-1),contentList.innerHTML=""+t.map(model).join("")}function filterAge(){const t=JSON.parse(JSON.stringify(catModels));t.forEach(t=>t.age=+t.age.replace(/\D/g,"")),t.sort((t,e)=>t.age>e.age?1:-1),contentList.innerHTML=""+t.map(model).join("")}getCatData(),activeLike(),cat.addEventListener("click",t=>{t.target.closest("#catbtn")&&(dialog.classList.add("active"),document.body.classList.add("lock"))});const da=new DynamicAdapt("max");da.init();const btnUp=document.querySelector("#btnUp");function showUp(){window.scrollTo({top:0,behavior:"smooth"})}btnUp.addEventListener("click",showUp);const btnShowCat=document.querySelector("#btnShowCat");function showCat(t){t.preventDefault(),contentList.insertAdjacentHTML("beforeend",toHTML)}btnShowCat.addEventListener("click",showCat);const modal=document.querySelector(".modal"),modalText=modal.querySelector("h2");modal.addEventListener("click",t=>{"modal__btn"===t.target.className&&modal.classList.remove("active")});const sort=document.querySelector(".content-header");sort.addEventListener("click",t=>{t.preventDefault(),t.target.closest("#price")&&(filterPrice(),t.target.closest("#price").parentElement.classList.add("active")),t.target.closest("#age")&&(filterAge(),t.target.closest("#age").parentElement.classList.add("active"))}),dialog.addEventListener("click",t=>{const e=()=>{dialog.classList.remove("active"),document.body.classList.remove("lock")};if(t.target.closest(".dialog__actions button")&&e(),!t.target.closest(".dialog__wrap")&&e(),t.target.closest(".column-btn__delete")){document.querySelectorAll(".column-btn__delete").forEach(t=>catArray.filter(e=>+t.dataset.id===e.id).map(t=>dialogItem(t)).join("")),t.target.closest(".dialog__item").classList.add("hidden"),catArray.splice(catArray.findIndex(e=>e.id===+t.target.dataset.id),1),setTimeout(()=>{dialogBody.innerHTML=""+(catArray.length?catArray.map(t=>dialogItem(t)).join(""):'<span class="not-cat">Список пуст...</span>'),catsLength()},200)}}),dialogBody.innerHTML='<span class="not-cat">Список пуст...</span>';const modelGallery=t=>`<img class="gallery__img" src="${t.url}" alt=${t.title}>`,$gallery=document.querySelector(".gallery"),$galleryBody=document.querySelector(".gallery__body-wrap"),$cardImage=document.querySelectorAll(".card-image img"),imageArray=[];function getImageCard(){$cardImage.forEach(t=>{t.addEventListener("click",e=>{const a=Number(e.target.closest(".content-body__card").id);catModels.map(e=>{e.url===t.alt&&e.id===a&&imageArray.push(e)});const n=imageArray.splice(imageArray.includes(e=>e.url===t.alt)).map(t=>modelGallery(t)).join("");$galleryBody.innerHTML=""+n,$gallery.classList.add("active"),document.body.classList.add("lock")})})}getImageCard(),$gallery.addEventListener("click",t=>{!t.target.closest(".gallery__wrap")&&($gallery.classList.remove("active"),document.body.classList.remove("lock"))});